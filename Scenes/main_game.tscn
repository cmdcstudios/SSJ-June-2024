[gd_scene load_steps=23 format=3 uid="uid://18fcv8pdliix"]

[ext_resource type="Script" path="res://Scripts/main_game.gd" id="1_kcqlo"]
[ext_resource type="Script" path="res://Scripts/ui_root.gd" id="4_72xad"]
[ext_resource type="Script" path="res://Scripts/Classes/Player.gd" id="4_ya4oq"]
[ext_resource type="PackedScene" uid="uid://cgncffwyttovl" path="res://Scenes/money_dialog.tscn" id="5_5k482"]
[ext_resource type="PackedScene" uid="uid://cdxvq8fhepfty" path="res://Scenes/inventory_dialog.tscn" id="5_ggvh3"]
[ext_resource type="Script" path="res://Data/BaseResources/CustomerQueue.gd" id="5_m68xa"]
[ext_resource type="PackedScene" uid="uid://c4wadefwf0p55" path="res://Scenes/customer_stager.tscn" id="5_sxr4y"]
[ext_resource type="AudioStream" uid="uid://bgif2ylu378c6" path="res://Assets/Audio/SSJ2024-Music-SFX/Music/track2.ogg" id="6_fitsq"]
[ext_resource type="PackedScene" uid="uid://dg4qvypmhyypc" path="res://Scenes/shop_sellable.tscn" id="9_62fba"]
[ext_resource type="PackedScene" uid="uid://cqcje1lnfv42n" path="res://Scenes/sellable_item.tscn" id="10_4jjyw"]
[ext_resource type="Texture2D" uid="uid://cas1woxv2cgfw" path="res://Assets/mascot.png" id="10_husom"]
[ext_resource type="Shader" path="res://Shaders/best_grid.gdshader" id="11_ea6ut"]
[ext_resource type="Resource" uid="uid://b4ffwftqs7ir0" path="res://Data/Items/53_pig_cube.tres" id="11_kqnm6"]
[ext_resource type="PackedScene" uid="uid://din5m6sbnntgk" path="res://Scenes/pause_menu.tscn" id="14_h8j2v"]
[ext_resource type="Script" path="res://Scripts/pause_menu.gd" id="15_f7f7p"]
[ext_resource type="StyleBox" uid="uid://xs3ovqvlqvxc" path="res://styles/panel_style.tres" id="16_eqi3o"]

[sub_resource type="CircleShape2D" id="CircleShape2D_w5ke0"]

[sub_resource type="Resource" id="Resource_8746v"]
script = ExtResource("5_m68xa")
customer_queue = Array[Resource("res://Data/BaseResources/CustomerResource.gd")]([])

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_agwhc"]
transparency = 1
shading_mode = 0
albedo_texture = ExtResource("10_husom")
texture_filter = 0

[sub_resource type="QuadMesh" id="QuadMesh_ii60h"]
material = SubResource("StandardMaterial3D_agwhc")
size = Vector2(12, 12)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_6fe1t"]
render_priority = 0
shader = ExtResource("11_ea6ut")
shader_parameter/subdivisions = 18.0
shader_parameter/grid_width = 0.0
shader_parameter/background_color = Color(0.0806752, 0.0554993, 0.207081, 1)
shader_parameter/background_color_two = Color(0.12956, 0.108413, 0.22666, 1)
shader_parameter/grid_color = Color(0.5, 0.5, 0.5, 1)
shader_parameter/dashed_scale_x = 0.99
shader_parameter/dashed_scale_y = 0.99
shader_parameter/dashed_count_x = 1.0
shader_parameter/dashed_count_y = 1.0
shader_parameter/speed = 0.2
shader_parameter/direction = Vector2(-1, 1)
shader_parameter/point_width = 0.0
shader_parameter/point_color = Color(0, 0, 0, 1)
shader_parameter/point_scale_x = 0.0
shader_parameter/point_scale_y = 0.0
shader_parameter/inside_width = 0.0
shader_parameter/inside_subdivisions = 1.0
shader_parameter/inside_color = Color(0.4, 0.4, 0.4, 1)
shader_parameter/in_dashed_scale_x = 0.0
shader_parameter/in_dashed_scale_y = 0.0
shader_parameter/in_dashed_count_x = 0.0
shader_parameter/in_dashed_count_y = 0.0

[sub_resource type="QuadMesh" id="QuadMesh_y6b1n"]
material = SubResource("ShaderMaterial_6fe1t")
size = Vector2(100, 100)

[node name="MainGame" type="Node3D"]
script = ExtResource("1_kcqlo")

[node name="Player" type="Node" parent="."]
unique_name_in_owner = true
script = ExtResource("4_ya4oq")

[node name="MouseArea" type="Area2D" parent="Player"]
collision_mask = 3

[node name="CollisionShape2D" type="CollisionShape2D" parent="Player/MouseArea"]
shape = SubResource("CircleShape2D_w5ke0")

[node name="UIRoot" type="CanvasLayer" parent="."]
script = ExtResource("4_72xad")

[node name="CustomerStager" parent="UIRoot" instance=ExtResource("5_sxr4y")]
queue_resource = SubResource("Resource_8746v")

[node name="MoneyDialog" parent="UIRoot" instance=ExtResource("5_5k482")]
anchors_preset = 5
anchor_left = 0.5
anchor_right = 0.5
anchor_bottom = 0.0
offset_left = -123.0
offset_right = 122.0
offset_bottom = 64.0
grow_vertical = 1

[node name="InventoryDialog" parent="UIRoot" instance=ExtResource("5_ggvh3")]
unique_name_in_owner = true
visible = false
anchors_preset = 6
anchor_left = 1.0
anchor_top = 0.5
anchor_bottom = 0.5
offset_left = -463.0
offset_top = -100.0
offset_right = -23.0
offset_bottom = 100.0
grow_horizontal = 0

[node name="Debugger" type="VBoxContainer" parent="UIRoot"]
visible = false
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -40.0
offset_bottom = 40.0
grow_horizontal = 0

[node name="ExitButton" type="Button" parent="UIRoot/Debugger"]
layout_mode = 2
text = "EXIT"

[node name="Label" type="Label" parent="UIRoot/Debugger"]
layout_mode = 2
text = "DEBUGGER"

[node name="DebuggerButtons" type="HBoxContainer" parent="UIRoot/Debugger"]
layout_mode = 2

[node name="DebugOn" type="Button" parent="UIRoot/Debugger/DebuggerButtons"]
layout_mode = 2
text = "ON"

[node name="DebugOff" type="Button" parent="UIRoot/Debugger/DebuggerButtons"]
layout_mode = 2
size_flags_horizontal = 10
text = "OFF"

[node name="StartDayButton" type="Button" parent="UIRoot"]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -4.0
offset_top = -4.0
offset_right = 4.0
offset_bottom = 4.0
grow_horizontal = 2
grow_vertical = 2
theme_override_font_sizes/font_size = 25
text = "START DAY"

[node name="GameOverLabel" type="Label" parent="UIRoot"]
visible = false
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -73.5
offset_top = -11.5
offset_right = 73.5
offset_bottom = 11.5
grow_horizontal = 2
grow_vertical = 2
theme_override_font_sizes/font_size = 72
text = "Thanks for playing!"

[node name="BGM" type="AudioStreamPlayer" parent="."]
stream = ExtResource("6_fitsq")
volume_db = -14.715
autoplay = true
bus = &"Music"

[node name="SubViewportContainer" type="SubViewportContainer" parent="."]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
stretch = true
stretch_shrink = 3

[node name="SubViewport" type="SubViewport" parent="SubViewportContainer"]
handle_input_locally = false
size = Vector2i(640, 360)
render_target_update_mode = 4

[node name="shop_sellable" parent="SubViewportContainer/SubViewport" instance=ExtResource("9_62fba")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -13.4634, -10.1607, 1.11769)

[node name="SellableItem" parent="SubViewportContainer/SubViewport/shop_sellable/Bunker_Mug" index="0" instance=ExtResource("10_4jjyw")]

[node name="SellableItem" parent="SubViewportContainer/SubViewport/shop_sellable/door_jam" index="2" instance=ExtResource("10_4jjyw")]

[node name="SellableItem" parent="SubViewportContainer/SubViewport/shop_sellable/Env_Floor" index="0" instance=ExtResource("10_4jjyw")]

[node name="SellableItem" parent="SubViewportContainer/SubViewport/shop_sellable/pig_001" index="0" instance=ExtResource("10_4jjyw")]
item = ExtResource("11_kqnm6")

[node name="SellableItem" parent="SubViewportContainer/SubViewport/shop_sellable/register" index="0" instance=ExtResource("10_4jjyw")]

[node name="SellableItem" parent="SubViewportContainer/SubViewport/shop_sellable/table_top" index="0" instance=ExtResource("10_4jjyw")]

[node name="SellableItem" parent="SubViewportContainer/SubViewport/shop_sellable/table_top_001" index="0" instance=ExtResource("10_4jjyw")]

[node name="SellableItem" parent="SubViewportContainer/SubViewport/shop_sellable/wall_1" index="0" instance=ExtResource("10_4jjyw")]

[node name="SellableItem" parent="SubViewportContainer/SubViewport/shop_sellable/Cube" index="0" instance=ExtResource("10_4jjyw")]

[node name="SellableItem" parent="SubViewportContainer/SubViewport/shop_sellable/window_frame" index="0" instance=ExtResource("10_4jjyw")]

[node name="SellableItem" parent="SubViewportContainer/SubViewport/shop_sellable/window_frame_001" index="0" instance=ExtResource("10_4jjyw")]

[node name="table_top_002" parent="SubViewportContainer/SubViewport/shop_sellable" index="11"]
transform = Transform3D(-0.00545869, 0, 1.69822, 0, 0.169822, 0, -3.39644, 0, -0.00272935, -7.62117, 4.82232, 7.15449)

[node name="SellableItem" parent="SubViewportContainer/SubViewport/shop_sellable/table_top_002" index="0" instance=ExtResource("10_4jjyw")]

[node name="SellableItem" parent="SubViewportContainer/SubViewport/shop_sellable/cabinet" index="1" instance=ExtResource("10_4jjyw")]

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="SubViewportContainer/SubViewport"]
transform = Transform3D(0.438149, -0.74339, 0.505368, 0.486973, 0.668858, 0.561682, -0.755568, 1.35106e-07, 0.65507, 0, 0, 0)
light_energy = 3.5

[node name="PlaceholderShopkeeper" type="MeshInstance3D" parent="SubViewportContainer/SubViewport"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 16.7518, -3.92118, -9.18849)

[node name="Camera3D" type="Camera3D" parent="SubViewportContainer/SubViewport"]
transform = Transform3D(0.707107, -0.340651, 0.619643, 0, 0.876307, 0.481753, -0.707107, -0.340651, 0.619643, 14.4172, 14.8471, 13.014)
projection = 1
current = true
size = 36.648

[node name="PixelOutlinePostProcess" type="MeshInstance3D" parent="SubViewportContainer/SubViewport/Camera3D"]
transform = Transform3D(0.707107, 0, -0.707107, -0.340651, 0.876307, -0.340651, 0.619642, 0.481754, 0.619642, 0.174032, -0.931562, -36.7345)
extra_cull_margin = 16384.0
mesh = SubResource("QuadMesh_ii60h")
skeleton = NodePath("../../../..")

[node name="MeshInstance3D" type="MeshInstance3D" parent="SubViewportContainer/SubViewport"]
transform = Transform3D(0.554204, -0.271883, 0.786726, -0.0903245, 0.919927, 0.381544, -0.827466, -0.282514, 0.485269, -37.0726, 0, -40.115)
mesh = SubResource("QuadMesh_y6b1n")

[node name="Pause Menu" parent="." instance=ExtResource("14_h8j2v")]
script = ExtResource("15_f7f7p")

[node name="Pause Panel" parent="Pause Menu/Darken Layer" index="0"]
theme_override_styles/panel = ExtResource("16_eqi3o")

[connection signal="pressed" from="UIRoot/Debugger/ExitButton" to="UIRoot" method="_on_exit_button_pressed"]
[connection signal="pressed" from="UIRoot/Debugger/DebuggerButtons/DebugOn" to="UIRoot" method="_on_debug_on_pressed"]
[connection signal="pressed" from="UIRoot/Debugger/DebuggerButtons/DebugOff" to="UIRoot" method="_on_debug_off_pressed"]
[connection signal="pressed" from="UIRoot/StartDayButton" to="UIRoot" method="_on_start_day_button_pressed"]
[connection signal="finished" from="BGM" to="." method="_on_bgm_finished"]
[connection signal="pressed" from="Pause Menu/Darken Layer/Pause Panel/Main Menu Button" to="." method="_on_main_menu_button_pressed"]
[connection signal="pressed" from="Pause Menu/Darken Layer/Pause Panel/Credits Button" to="." method="_on_credits_button_pressed"]
[connection signal="pressed" from="Pause Menu/Darken Layer/Pause Panel/Close Menu Button" to="." method="_on_close_menu_button_pressed"]
[connection signal="pressed" from="Pause Menu/BGM Next" to="." method="_on_bgm_next_pressed"]
[connection signal="pressed" from="Pause Menu/BGM Prev" to="." method="_on_bgm_prev_pressed"]
[connection signal="pressed" from="Pause Menu/Music Toggle" to="." method="_on_music_toggle_pressed"]
[connection signal="pressed" from="Pause Menu/Pause Button" to="." method="_on_pause_button_pressed"]
[connection signal="animation_finished" from="Pause Menu/AnimationPlayer" to="Pause Menu" method="_on_animation_player_animation_finished"]

[editable path="SubViewportContainer/SubViewport/shop_sellable"]
[editable path="Pause Menu"]
