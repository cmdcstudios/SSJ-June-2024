[gd_scene load_steps=18 format=3 uid="uid://18fcv8pdliix"]

[ext_resource type="Script" path="res://Scenes/main_game.gd" id="1_kcqlo"]
[ext_resource type="PackedScene" uid="uid://dtd852yjnr62n" path="res://Assets/Shop Base Assets/shop.glb" id="2_tu3oi"]
[ext_resource type="Script" path="res://Scripts/ui_root.gd" id="4_72xad"]
[ext_resource type="Script" path="res://Scripts/Classes/Player.gd" id="4_ya4oq"]
[ext_resource type="PackedScene" uid="uid://cgncffwyttovl" path="res://Scenes/money_dialog.tscn" id="5_5k482"]
[ext_resource type="PackedScene" uid="uid://cdxvq8fhepfty" path="res://Scenes/inventory_dialog.tscn" id="5_ggvh3"]
[ext_resource type="Script" path="res://Data/BaseResources/CustomerQueue.gd" id="5_m68xa"]
[ext_resource type="PackedScene" uid="uid://c4wadefwf0p55" path="res://Scenes/customer_stager.tscn" id="5_sxr4y"]
[ext_resource type="AudioStream" uid="uid://bgif2ylu378c6" path="res://Assets/Audio/SSJ2024-Music-SFX/Music/track2.ogg" id="6_fitsq"]
[ext_resource type="Shader" path="res://Shaders/pixel_outline.gdshader" id="10_883vh"]
[ext_resource type="Shader" path="res://Shaders/best_grid.gdshader" id="11_ea6ut"]

[sub_resource type="CircleShape2D" id="CircleShape2D_w5ke0"]

[sub_resource type="Resource" id="Resource_8746v"]
script = ExtResource("5_m68xa")
customer_queue = Array[Resource("res://Data/BaseResources/CustomerResource.gd")]([])

[sub_resource type="ShaderMaterial" id="ShaderMaterial_dw5h8"]
render_priority = 0
shader = ExtResource("10_883vh")
shader_parameter/depth_threshold = 0.05
shader_parameter/reverse_depth_threshold = 0.25
shader_parameter/normal_threshold = 0.224
shader_parameter/darken_amount = 0.24
shader_parameter/lighten_amount = 2.09
shader_parameter/normal_edge_bias = Vector3(1, 1, 1)
shader_parameter/light_direction = Vector3(-0.96, -0.18, 0.2)

[sub_resource type="QuadMesh" id="QuadMesh_yuaal"]
material = SubResource("ShaderMaterial_dw5h8")
flip_faces = true
size = Vector2(2, 2)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_6fe1t"]
render_priority = 0
shader = ExtResource("11_ea6ut")
shader_parameter/subdivisions = 18.0
shader_parameter/grid_width = 0.0
shader_parameter/background_color = Color(0.0806752, 0.0554993, 0.207081, 1)
shader_parameter/background_color_two = Color(0.12956, 0.108413, 0.22666, 1)
shader_parameter/grid_color = Color(0.5, 0.5, 0.5, 1)
shader_parameter/dashed_scale_x = 0.99
shader_parameter/dashed_scale_y = 0.99
shader_parameter/dashed_count_x = 1.0
shader_parameter/dashed_count_y = 1.0
shader_parameter/speed = 0.2
shader_parameter/direction = Vector2(-1, 1)
shader_parameter/point_width = 0.0
shader_parameter/point_color = Color(0, 0, 0, 1)
shader_parameter/point_scale_x = 0.0
shader_parameter/point_scale_y = 0.0
shader_parameter/inside_width = 0.0
shader_parameter/inside_subdivisions = 1.0
shader_parameter/inside_color = Color(0.4, 0.4, 0.4, 1)
shader_parameter/in_dashed_scale_x = 0.0
shader_parameter/in_dashed_scale_y = 0.0
shader_parameter/in_dashed_count_x = 0.0
shader_parameter/in_dashed_count_y = 0.0

[sub_resource type="QuadMesh" id="QuadMesh_y6b1n"]
material = SubResource("ShaderMaterial_6fe1t")
size = Vector2(100, 100)

[node name="MainGame" type="Node3D"]
script = ExtResource("1_kcqlo")

[node name="Player" type="Node" parent="."]
unique_name_in_owner = true
script = ExtResource("4_ya4oq")

[node name="MouseArea" type="Area2D" parent="Player"]
collision_mask = 3

[node name="CollisionShape2D" type="CollisionShape2D" parent="Player/MouseArea"]
shape = SubResource("CircleShape2D_w5ke0")

[node name="UIRoot" type="CanvasLayer" parent="."]
script = ExtResource("4_72xad")

[node name="CustomerStager" parent="UIRoot" instance=ExtResource("5_sxr4y")]
queue_resource = SubResource("Resource_8746v")

[node name="MoneyDialog" parent="UIRoot" instance=ExtResource("5_5k482")]
anchors_preset = 5
anchor_left = 0.5
anchor_right = 0.5
anchor_bottom = 0.0
offset_left = -48.0
offset_right = 48.0
offset_bottom = 31.0
grow_vertical = 1

[node name="InventoryDialog" parent="UIRoot" instance=ExtResource("5_ggvh3")]
unique_name_in_owner = true
visible = false
anchors_preset = 6
anchor_left = 1.0
anchor_top = 0.5
anchor_bottom = 0.5
offset_left = -463.0
offset_top = -100.0
offset_right = -23.0
offset_bottom = 100.0
grow_horizontal = 0

[node name="Debugger" type="VBoxContainer" parent="UIRoot"]
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -40.0
offset_bottom = 40.0
grow_horizontal = 0

[node name="ExitButton" type="Button" parent="UIRoot/Debugger"]
layout_mode = 2
text = "EXIT"

[node name="Label" type="Label" parent="UIRoot/Debugger"]
layout_mode = 2
text = "DEBUGGER"

[node name="DebuggerButtons" type="HBoxContainer" parent="UIRoot/Debugger"]
layout_mode = 2

[node name="DebugOn" type="Button" parent="UIRoot/Debugger/DebuggerButtons"]
layout_mode = 2
text = "ON"

[node name="DebugOff" type="Button" parent="UIRoot/Debugger/DebuggerButtons"]
layout_mode = 2
size_flags_horizontal = 10
text = "OFF"

[node name="StartDayButton" type="Button" parent="UIRoot"]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -4.0
offset_top = -4.0
offset_right = 4.0
offset_bottom = 4.0
grow_horizontal = 2
grow_vertical = 2
theme_override_font_sizes/font_size = 25
text = "START DAY"

[node name="GameOverLabel" type="Label" parent="UIRoot"]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -73.5
offset_top = -11.5
offset_right = 73.5
offset_bottom = 11.5
grow_horizontal = 2
grow_vertical = 2
theme_override_font_sizes/font_size = 72
text = "Thanks for playing!"

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="."]
stream = ExtResource("6_fitsq")
volume_db = -14.715
autoplay = true
bus = &"Music"

[node name="SubViewportContainer" type="SubViewportContainer" parent="."]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
stretch = true
stretch_shrink = 3

[node name="SubViewport" type="SubViewport" parent="SubViewportContainer"]
handle_input_locally = false
size = Vector2i(640, 360)
render_target_update_mode = 4

[node name="shop" parent="SubViewportContainer/SubViewport" instance=ExtResource("2_tu3oi")]
transform = Transform3D(0.992375, 0, -0.123255, 0, 1, 0, 0.123255, 0, 0.992375, -18.5713, -15.437, 0)

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="SubViewportContainer/SubViewport"]
transform = Transform3D(0.438149, -0.74339, 0.505368, 0.486973, 0.668858, 0.561682, -0.755568, 1.35106e-07, 0.65507, 0, 0, 0)
light_energy = 3.5

[node name="Camera3D" type="Camera3D" parent="SubViewportContainer/SubViewport"]
transform = Transform3D(0.707107, -0.340651, 0.619643, 0, 0.876307, 0.481753, -0.707107, -0.340651, 0.619643, 14.4172, 13.6621, 13.014)
projection = 1
size = 44.373

[node name="PixelOutlinePostProcess" type="MeshInstance3D" parent="SubViewportContainer/SubViewport/Camera3D"]
transform = Transform3D(0.707107, 0, -0.707107, -0.340651, 0.876307, -0.340651, 0.619642, 0.481754, 0.619642, -0.992203, -2.62772, -23.5793)
mesh = SubResource("QuadMesh_yuaal")
skeleton = NodePath("../../../..")

[node name="MeshInstance3D" type="MeshInstance3D" parent="SubViewportContainer/SubViewport"]
transform = Transform3D(0.554204, -0.271883, 0.786726, -0.0903245, 0.919927, 0.381544, -0.827466, -0.282514, 0.485269, -37.0726, 0, -40.115)
mesh = SubResource("QuadMesh_y6b1n")

[connection signal="pressed" from="UIRoot/Debugger/ExitButton" to="UIRoot" method="_on_exit_button_pressed"]
[connection signal="pressed" from="UIRoot/Debugger/DebuggerButtons/DebugOn" to="UIRoot" method="_on_debug_on_pressed"]
[connection signal="pressed" from="UIRoot/Debugger/DebuggerButtons/DebugOff" to="UIRoot" method="_on_debug_off_pressed"]
[connection signal="pressed" from="UIRoot/StartDayButton" to="UIRoot" method="_on_start_day_button_pressed"]
